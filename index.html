<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Po-Kai Yang – CV</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --color-dark: #463f3a;
      --color-gray1: #8a817c;
      --color-gray2: #bcb8b1;
      --color-light: #f4f3ee;
      --color-accent: #e0afa0;
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: Arial, sans-serif; color: var(--color-dark); background: var(--color-light); }
    /* Sidebar */
    .sidebar { position: fixed; top: 0; left: 0; width: 240px; height: 100vh; padding: 2rem 1rem 1rem; background: var(--color-dark); color: var(--color-light); display: flex; flex-direction: column; align-items: center; overflow-y: auto; }
    .sidebar img.profile { width: 140px; height: 140px; border-radius: 50%; object-fit: cover; margin-bottom: 0.5rem; }
    .sidebar h1 { margin: 0.5rem 0 1rem; font-size: 1.8rem; text-align: center; }
    .sidebar p, .sidebar a { margin: 0.3rem 0; color: var(--color-light); font-size: 0.95rem; text-decoration: none; display: flex; align-items: center; }
    .sidebar p i, .sidebar a i { margin-right: 0.5rem; width: 1rem; }
    .sidebar a:hover { text-decoration: underline; }
    /* Knight's Tour Game */
    #knight-game { margin-top: auto; width: 100%; display: flex; flex-direction: column; align-items: center; }
    #knight-game h3 { color: var(--color-light); margin-bottom: 0.5rem; }
    #board { display: grid; grid-template-columns: repeat(7, 30px); grid-template-rows: repeat(7, 30px); gap: 2px; }
    .square { width: 30px; height: 30px; background: var(--color-light); position: relative; cursor: pointer; }
    .square.visited { background: var(--color-gray2); }
    .square.next { background: var(--color-accent); }
    .square.start { border: 2px solid var(--color-accent); }
    .square.hint { background: var(--color-gray1); border: 3px solid var(--color-accent); }
    .panda { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 20px; height: 20px; }
    #move-count, #message { margin-top: 0.5rem; color: var(--color-light); font-weight: bold; }
    #restart-btn, #rules-btn, #hint-btn { margin: 0.3rem; padding: 0.3rem 0.6rem; background: var(--color-accent); border: none; color: var(--color-light); border-radius: 4px; cursor: pointer; }
    /* Main content */
    main { margin-left: 260px; padding: 2rem; max-width: 1200px; }
    section + section { margin-top: 2rem; border-top: 1px solid var(--color-gray2); padding-top: 1.5rem; }
    section { padding-left: 1rem; }
    h2 { font-size: 1.6rem; color: var(--color-dark); border-left: 4px solid var(--color-accent); padding-left: 0.5rem; }
    p.intro { font-size: 1rem; line-height: 1.5; margin-bottom: 1rem; }
    p.intro a { color: var(--color-accent); text-decoration: none; }
    p.intro a:hover { text-decoration: underline; }
    ul { list-style: none; padding: 0; }
    ul li { display: flex; align-items: flex-start; margin-bottom: 0.8rem; }
    ul li i { margin-right: 0.5rem; color: var(--color-accent); margin-top: 0.2rem; }
    ul li span.date { flex: 0 0 12rem; font-weight: bold; }
    ul li span.desc { flex: 1; }
    ul ul { list-style: none; margin-left: 1.5rem; padding-left: 0; }
    ul ul li { position: relative; padding-left: 1.2rem; margin-bottom: 0.4rem; }
    ul ul li::before { content: "•"; position: absolute; left: 0; top: 0.2rem; color: var(--color-accent); }
    .desc a { color: var(--color-accent); text-decoration: none; }
    .desc a:hover { text-decoration: underline; }
    #pub-list li { display: flex; align-items: baseline; white-space: normal; margin-bottom: 0.5rem; }
    #pub-list li i { margin-right: 0.5rem; color: var(--color-accent); }
    #pub-list li a { color: var(--color-accent); font-weight: bold; text-decoration: none; margin-left: 0.5rem; }
    #pub-list li a:hover { text-decoration: underline; }
    #pub-list li em { margin-left: 0.5rem; font-style: italic; }
    #pub-list li .citations { margin-left: 0.5rem; color: var(--color-gray1); font-size: 0.9rem; }
    @media(max-width: 768px) {
      .sidebar { position: relative; width: 100%; height: auto; padding-top: 1rem; }
      main { margin-left: 0; }
    }
  </style>
</head>
<body>
  <aside class="sidebar">
    <img class="profile" src="photo.jpg" alt="Po-Kai Yang">
    <h1>Po-Kai Yang</h1>
    <p><i class="fas fa-map-marker-alt"></i>Leuven, Belgium</p>
    <p><i class="fas fa-envelope"></i><a href="mailto:po-kai.yang@kuleuven.be">po-kai.yang@kuleuven.be</a></p>
    <p><i class="fas fa-phone"></i>+32 456 388 594</p>
    <p><i class="fas fa-phone"></i>+886 988 335 302</p>
    <a href="https://orcid.org/0000-0003-0649-9263"><i class="fab fa-orcid"></i>ORCID</a>
    <a href="https://scholar.google.com/citations?user=0gl__ukAAAAJ&hl=zh-TW"><i class="fas fa-graduation-cap"></i>Google Scholar</a>
    <a href="https://linkedin.com/in/po-kai-yang-a41921176"><i class="fab fa-linkedin"></i>LinkedIn</a>
    <a href="https://github.com/kai0122"><i class="fab fa-github"></i>GitHub</a>
    <a href="https://twitter.com/iampokaiyang"><i class="fab fa-twitter"></i>@iampokaiyang</a>

    <div id="knight-game">
      <h3>Knight's Tour Puzzle</h3>
      <button id="rules-btn">Rules</button>
      <button id="hint-btn">Hint</button>
      <div id="board"></div>
      <div id="move-count">Moves: 0</div>
      <div id="message"></div>
      <button id="restart-btn" style="display:none;">Restart</button>
    </div>
  </aside>

  <main>
    <!-- (About, Updates, Experience, Education, Awards, Services...) -->
    <section id="publications">
      <h2>Publications & Citations</h2>
      <ul id="pub-list"><li>Loading publications…</li></ul>
    </section>
  </main>

  <script>
    (function(){
      const size = 7;
      const knightMoves = [[1,2],[2,1],[-1,2],[-2,1],[1,-2],[2,-1],[-1,-2],[-2,-1]];
      const board = document.getElementById('board');
      const moveCountEl = document.getElementById('move-count');
      const msgEl = document.getElementById('message');
      const restartBtn = document.getElementById('restart-btn');
      const rulesBtn = document.getElementById('rules-btn');
      const hintBtn = document.getElementById('hint-btn');
      let current, visited, moves;

      function idx(x,y){ return y*size + x; }

      function init(){
        board.innerHTML = '';
        visited = Array(size*size).fill(false);
        moves = 0;
        current = {x:0,y:0};
        msgEl.textContent = '';
        moveCountEl.textContent = 'Moves: 0';
        restartBtn.style.display = 'none';
        buildBoard();
        highlight();
      }

      function buildBoard(){
        for(let y=0;y<size;y++){
          for(let x=0;x<size;x++){
            const sq = document.createElement('div');
            sq.className = 'square';
            sq.dataset.x = x;
            sq.dataset.y = y;
            sq.addEventListener('click',onSquareClick);
            board.appendChild(sq);
          }
        }
      }

      function highlight(){
        board.querySelectorAll('.panda').forEach(el=>el.remove());
        board.childNodes.forEach(sq=>sq.classList.remove('visited','next','start','hint'));
        visited[idx(current.x,current.y)] = true;
        board.childNodes.forEach((sq,i)=>{ if(visited[i]) sq.classList.add('visited'); });
        const panda = document.createElement('img');
        panda.src = './panda.png';
        panda.className = 'panda';
        board.childNodes[idx(current.x,current.y)].appendChild(panda);
        board.childNodes[idx(0,0)].classList.add('start');

        let nextCount = 0;
        knightMoves.forEach(([dx,dy])=>{
          const nx=current.x+dx, ny=current.y+dy;
          if(nx>=0&&nx<size&&ny>=0&&ny<size&&!visited[idx(nx,ny)]){
            board.childNodes[idx(nx,ny)].classList.add('next');
            nextCount++;
          }
        });
        if(nextCount===0) finish();
      }

      function onSquareClick(e){
        if(!e.currentTarget.classList.contains('next')) return;
        current = {x:+e.currentTarget.dataset.x, y:+e.currentTarget.dataset.y};
        moves++;
        moveCountEl.textContent = `Moves: ${moves}`;
        highlight();
      }

      function showHints(){
        board.querySelectorAll('.hint').forEach(sq=>sq.classList.remove('hint'));
        // gather candidates
        const cands = [];
        knightMoves.forEach(([dx,dy])=>{
          const nx=current.x+dx, ny=current.y+dy;
          if(nx>=0&&nx<size&&ny>=0&&ny<size&&!visited[idx(nx,ny)]){
            // count onward moves
            let deg = 0;
            knightMoves.forEach(([adx,ady])=>{
              const ax=nx+adx, ay=ny+ady;
              if(ax>=0&&ax<size&&ay>=0&&ay<size&&!visited[idx(ax,ay)]) deg++;
            });
            cands.push({nx,ny,deg});
          }
        });
        if(!cands.length) return;
        // find minimum degree
        const minDeg = Math.min(...cands.map(c=>c.deg));
        // highlight only those with deg == minDeg
        cands.filter(c=>c.deg===minDeg)
             .forEach(c=> board.childNodes[idx(c.nx,c.ny)].classList.add('hint'));
      }

      function finish(){
        msgEl.textContent = visited.every(v=>v)
          ? `Congratulations! Completed in ${moves} moves.`
          : `No moves left! Visited ${moves+1}/${size*size}. Try again.`;
        restartBtn.style.display = 'block';
      }

      rulesBtn.addEventListener('click',()=>{
        alert('Start at top-left with the panda. Move in L-shapes (knight moves) to visit all squares once.');
      });
      hintBtn.addEventListener('click',showHints);
      restartBtn.addEventListener('click',init);

      init();
    })();

    // publications loader (unchanged)…
    async function loadPublications(){
      try{
        const res = await fetch('publications.json?t='+Date.now());
        const data = await res.json();
        data.publications.sort((a,b)=>parseInt(b.year||'0')-parseInt(a.year||'0'));
        const list = document.getElementById('pub-list');
        list.innerHTML = '';
        data.publications.forEach(pub=>{
          const auth = pub.authors.split(/, | and /g)
            .map(n=>n.trim())
            .map(n=>n.includes('Yang')?`<strong>${n}</strong>`:n)
            .join(', ');
          const li = document.createElement('li');
          li.innerHTML = `
            <i class="fas fa-file-alt"></i>
            <span class="desc">${auth}, “${pub.title},” <em>${pub.journal||'Unknown Venue'}</em>.</span>
            <a href="${pub.url}" target="_blank">Read Paper</a>
            <span class="citations">(${pub.citations} citations)</span>
          `;
          list.appendChild(li);
        });
      }catch{
        document.getElementById('pub-list').innerHTML='<li>Failed to load publications.</li>';
      }
    }
    loadPublications();
  </script>
</body>
</html>
